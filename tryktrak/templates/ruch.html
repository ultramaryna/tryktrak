{% extends "base.html" %}
{% block title %}Gra{% endblock %}
{%  block lewy %}
    Typ gry: {{ typ_gry }}<br>
    Aktywny gracz: {{ kolejka }}<br>

    Rzuty kostką:<br>
    <div id = "kostki">
        Rzuty do wykorzystania:<br>
        {% set sciezki = ["../static/1.png", "../static/2.png", "../static/3.png", "../static/4.png", "../static/5.png", "../static/6.png"] %}
        {% for rzut in rzuty %}
            {% if loop.index < 3 %}
                {% set sciezka = sciezki[rzut-1] %}
                <img src = "{{ sciezka }}">
            {% endif %}
        {% endfor %}
    </div>
    Pozostałe wartości ruchu:
    {%  for x in ruchy %}
        {{ x }}
    {%  endfor %}<br>
    Ruchy możliwe do wykonania:

        {{ mozliwe_ruchy }}
    {% if kolejka == 'Komputer' %}
        Teraz komputer ma kolejkę!
        <form method = "get" method = "/gra">
            <input type = "submit" value = "Ok">
        </form><br>
    {% else %}
        Wybierz kolejny ruch:
        <form method = "get" method = "/gra">
            <input type = "text" name = "pionek">
            <input type = "text" name = "pole">
            <input type = "submit" value = "Zatwierdź">
        </form><br>
    {% endif %}
    {% if komunikaty %}
        {% for komunikat in komunikaty %}
            {{ komunikat }}
        {% endfor %}
    {% endif %}
{% endblock %}
{% block content %}
    <div id = "plansza">
            {% set licznik = 0 %}
            {% for pole, wartosc in stan_gry.items() %}
                {% if licznik < 12 %}
                    <div id = {{ pole }} class = "pole dolne_pole">
                    <p>{{ loop.index }}</p>
                {% else %}
                    <div id = {{ pole }} class = "pole gorne_pole">
                    {% if loop.index < 25 %}
                        <p>{{ loop.index }}</p>
                    {% endif %}
                {% endif %}
                {% set licznik = licznik+1 %}
                {% for pionek in wartosc %}
                    {% if pionek == 'bordo' %}
                        <div class = "pionek_bordo"></div>
                    {% elif pionek == 'bialy' %}
                        <div class = "pionek_bialy"></div>
                    {% endif %}
                {% endfor %}
                    </div>
            {% endfor %}
            <div id = "zbite" style="left:285px;">
                {% for pionek in zbite %}
                    {% if 'bordo' in pionek %}
                        <div class = "pionek_bordo"></div>
                    {% elif 'bialy' in pionek %}
                        <div class = "pionek_bialy"></div>
                    {% endif %}
                {% endfor %}
            </div>
    </div>
{% endblock %}
{% block script %}
    <script>
    $(document).ready(function(){
        $('#pole_18').after('<div id="belka_gora" class = "gorne_pole pole" style="width:28px;"></div>');
        $('#pole_6').after('<div id="belka_dol" class = "dolne_pole pole" style="width:28px;"></div>');
    });
    </script>
{% endblock %}